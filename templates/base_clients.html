<!DOCTYPE html>
<html>
<head>
    <title>Liste des Clients</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .search-bar { margin-bottom: 20px; }
        table { width: 100%; }
        th, td { vertical-align: middle; }
    </style>
</head>
<body>
    <h1>Liste des Clients</h1>
    <div class="search-bar">
        <input type="text" id="searchInput" class="form-control" placeholder="Rechercher un client...">
    </div>
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Nom Entreprise</th>
                <th>Forme Juridique</th>
                <th>Représentant Légal</th>
                <th>Qualité</th>
                <th>Adresse</th>
                <th>Code Postal</th>
                <th>Ville</th>
                <th>Téléphone</th>
                <th>Mail Général</th>
                <th>SIRET</th>
                <th>Code APE</th>
                <th>Chargé Suivi Travaux</th>
                <th>Mail CST</th>
                <th>Téléphone CST</th>
                <th>Chargé Suivi Comptabilité</th>
                <th>Mail CSC</th>
            </tr>
        </thead>
        <tbody id="clientsTable">
            {% for client in clients %}
            <tr>
                <td>{{ client.nom_entreprise }}</td>
                <td>{{ client.forme_juridique }}</td>
                <td>{{ client.representant_legal }}</td>
                <td>{{ client.qualite }}</td>
                <td>{{ client.adresse }} {{ client.complement_adresse }}</td>
                <td>{{ client.code_postal }}</td>
                <td>{{ client.ville }}</td>
                <td>{{ client.telephone }}</td>
                <td>{{ client.mail_general }}</td>
                <td>{{ client.siret }}</td>
                <td>{{ client.code_ape }}</td>
                <td>{{ client.nom_charge_suivi_travaux }} ({{ client.fonction_charge_suivi_travaux }})</td>
                <td>{{ client.mail_charge_suivi_travaux }}</td>
                <td>{{ client.telephone_charge_suivi_travaux }}</td>
                <td>{{ client.nom_charge_suivi_compta }} ({{ client.fonction_charge_suivi_compta }})</td>
                <td>{{ client.mail_charge_suivi_compta }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <a href="/"><button class="btn btn-secondary">Retour</button></a>
    <script>
        document.getElementById('searchInput').addEventListener('input', function() {
            let input = this.value.toLowerCase();
            let rows = document.getElementById('clientsTable').getElementsByTagName('tr');
            for (let i = 0; i < rows.length; i++) {
                let text = rows[i].textContent.toLowerCase();
                rows[i].style.display = text.includes(input) ? '' : 'none';
            }
        });
    </script>
</body>
</html>